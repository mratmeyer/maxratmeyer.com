<nav>
  <button class="nav-button collapsed" id="nav-button" type="button" onclick="toggleNavbar()" aria-label="Navigation Button">
    <span class="icon-bar top-bar"></span>
    <span class="icon-bar middle-bar"></span>
    <span class="icon-bar bottom-bar"></span>				
  </button>
  <ul class="nav-list" id="overlay">
    <li class="nav-item"> 
      <a href="/" class="nav-link">Home</a>
    </li>
    <li class="nav-item">
      <a href="/blog/" class="nav-link">Archives</a>
    </li>
    <li class="nav-item">
      <a href="/about/" class="nav-link">About</a>
    </li>
    <li class="nav-item nav-icon-item">
      <a onclick="toggleDarkMode()"><svg class="nav-icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><title>Toggle dark mode</title><path d="M1390 1303q-54 9-110 9-182 0-337-90t-245-245-90-337q0-192 104-357-201 60-328.5 229t-127.5 384q0 130 51 248.5t136.5 204 204 136.5 248.5 51q144 0 273.5-61.5t220.5-171.5zm203-85q-94 203-283.5 324.5t-413.5 121.5q-156 0-298-61t-245-164-164-245-61-298q0-153 57.5-292.5t156-241.5 235.5-164.5 290-68.5q44-2 61 39 18 41-15 72-86 78-131.5 181.5t-45.5 218.5q0 148 73 273t198 198 273 73q118 0 228-51 41-18 72 13 14 14 17.5 34t-4.5 38z"/></svg></a>
    </li>
  </ul>
</nav>
<script>
  const currentTheme = localStorage.getItem("theme");
  if (currentTheme === null) {
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      setDark();
    }
  } else {
    document.body.classList.add(currentTheme);
  }

  const button = document.querySelector('.nav-button')
  let collapsed = true;
  function toggleNavbar() { 
    if (!collapsed) {
      button.classList.add('collapsed');
      collapsed = true;
      document.getElementById("overlay").style.display = "none";
    } else {
      button.classList.remove('collapsed');
      collapsed = false;
      document.getElementById("overlay").style.display = "block";
    }
  }

  function toggleDarkMode() {
    const theme = localStorage.getItem("theme");

    if (theme == "light") {
      setDark();
    } else if (theme == "dark") {
      setLight();
    } else {
      setDark();
    }
  };

  function setLight() {
    localStorage.setItem("theme", "light");
    document.body.classList.remove("dark");
    document.body.classList.add("light");
  };

  function setDark() {
    localStorage.setItem("theme", "dark");
    document.body.classList.remove("light");
    document.body.classList.add("dark");
  };
</script>